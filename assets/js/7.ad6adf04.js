(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{615:function(t,e,n){},618:function(t,e,n){},742:function(t,e){},749:function(t,e,n){"use strict";n(615)},750:function(t,e,n){"use strict";n(618)},751:function(t){t.exports=JSON.parse('{"a":"@action-agenda/map-counts"}')},827:function(t,e,n){"use strict";n.r(e),n.d(e,"install",(function(){return ut})),n.d(e,"plugin",(function(){return pt}));var r=n(432),a=n(59),o=(n(120),n(84),n(36)),c=n(210),i=n(214),s=n(213),u=(n(218),n(85),n(10),n(12),n(15),n(474),n(58),n(463),n(219),n(464),n(518)),p=u.c.initEu,f=u.c.mapHomePositionToEu,m=u.b.mapHomePositionToCountry,l=u.d.hasPoliticalMappings,d=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(t,r){var a;return Object(o.a)(this,n),r.countryHitFunction=A,(a=e.call(this,t,r)).events.on("ready",h(Object(c.a)(a))),a}return n}(u.f),h=function(t){return function(){v(t),p(t,{callBack:A,countryToolTipAction:B(t),euActionToolTipAction:w(t)},!0)}},C=function(t,e){var n=t.options,r=n.basePath,a=n.countryParamName,o=l(e),c=o||e;return"".concat(r,"?").concat(a,"=").concat(c)},A=function(t){return function(e){var n=t.options.euIdentifier,r=e.target.dataItem.dataContext?e.target.dataItem.dataContext.id:n,a=e.target.dataItem.dataContext?e.target.dataItem.dataContext.name:"European Union";if(t.selectedCountry||(t.selectedCountry={}),t.selectedCountry.code=r,t.selectedCountry.name=a,!("undefined"==typeof window)){var o=new CustomEvent("countrySelected",{detail:r?t.selectedCountry:void 0});window.document.dispatchEvent(o)}}},b=function(t){var e=t.options.countryParamName,n=new URLSearchParams(location.search).get(e);return n?n.toUpperCase():void 0},y=function(t){var e=t.options,n=e.params,r=e.countryParamName;if(n&&r){var a=n[r];return(getCountry(a)||{}).code}},v=function(t){var e=function(t){return b(t)||y(t)}(t);if(e)return["EU","EUR"].includes(e)?setTimeout((function(){return f(t)}),1e3):void setTimeout((function(){return m(e,t)}),1e3)},B=function(t){return function(e){return t.options.countryToolTipAction?t.options.countryToolTipAction(e):'href="'.concat(C(t,e),'"')}},w=function(t){return function(e){return t.options.euActionToolTipAction?t.options.euActionToolTipAction(e):'href="'.concat(C(t,e),'"')}},E=(n(83),n(88)),D=n(456),O=n(44),g=(n(475),n(129),n(519),n(727),n(121),n(220),n(37),n(729)),F=n.n(g),x=n(440);Object(x.c)(),Object(x.a)("all");var j=new Map;function _(){return k.apply(this,arguments)}function k(){return(k=Object(a.a)(regeneratorRuntime.mark((function t(){var e,n,r,a,o,c,i,s,u,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!j.size){t.next=2;break}return t.abrupt("return",j);case 2:return t.next=4,F.a.get("https://api.cbd.int/api/v2013/thesaurus/terms").query({termCode:"5D13EC43-F3E0-415E-AF67-62CCC85899AF"});case 4:e=t.sent.body.narrowerTerms,n=[],e.push.apply(e,Object(O.a)(["C9A535FB-8B15-4BD5-9AC7-9A9783871A5A","99724A74-6CCD-4731-B111-9EEDF2612303","90DBC1E4-AFD0-4FB4-B9EE-4CA2CB5D2C36","9EED1DD1-BA36-41F1-BEF9-63021AB24EBF","39AF4BA6-E769-4013-B5F2-91B2E5BACB27","3B22777F-BD43-4DED-8379-EB3829BB53A5","DB6CE7B5-EE86-41B1-A3A8-726E5A76C4F9","5E884201-FBF6-4204-923C-AAC2BF11F2E3","A23DD6C0-44C5-418D-83B5-461D79D2721A","CCA4B662-8EF4-418D-B327-0D6F418AA703","B6C14B25-FDF6-4FA1-97A2-561D6B43FA80","14E81A9D-73EA-4667-A699-CD78C61B3655","3BED3C61-C8C5-49D8-9AFA-0B4D03FC427F","AB9EBE76-796B-45B3-879B-3BA009E983CC","884FADBA-3BF3-4D76-AC7B-83E076852CD4","1C1B2D57-0F0F-423D-99C8-A048051B508C","948125C2-F580-4357-AA0A-B6C636279E96","8920655D-3986-465B-837A-CE055B428A74","38126DBD-8B41-4355-B0E5-643655CBC06E","284697B9-D1C2-426B-890A-1ADBAC8EC477","293E5CA9-15DB-4D83-9CAC-F406F759727A","942E40CA-4C23-4D3A-A0B4-736CD0EFCD54","bd12d7fb-91f7-4b2d-996c-e70f18a51f0e","0938DB0F-E4BB-464F-ABBB-ADD615BE5371","11D3515A-2C70-4766-B07C-E538AA16554B","BA8BAEF5-821C-43A6-8700-5CC215D4B5B0","8317D3CB-6CAB-4C05-BC2C-2DB93A8FEC6A","E9BAA797-CDAE-497E-A860-87AE784F4C53","B462BE9E-38A6-4DE0-997D-2CC07853379F","0EC2E5AE-25F3-4D3A-B71F-8019BB62ED4B","40CE7EB5-2A58-4F89-A0AF-F485BBC32F81","6F901F3F-630D-4C4C-A3CC-BDE5C7876C68","345F2B78-DE28-475B-BA7D-81C3DA020ADF","6F65B204-500B-4C56-B57D-25CC3DC809F8","AEF6F814-52C0-4F1A-9838-5799B021BA26"])),r=Object(D.a)(e);try{for(r.s();!(a=r.n()).done;)o=a.value,c=F.a.get("https://api.cbd.int/api/v2013/thesaurus/terms").query({termCode:o}).then((function(t){return t.body.narrowerTerms})),n.push(c)}catch(t){r.e(t)}finally{r.f()}return t.next=11,Promise.all(n);case 11:i=t.sent,s=[],u=Object(D.a)(e.keys());try{for(u.s();!(p=u.n()).done;)f=p.value,j.set(e[f],i[f]),s.push.apply(s,Object(O.a)(i[f]))}catch(t){u.e(t)}finally{u.f()}return t.abrupt("return",j);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t,e){return T.apply(this,arguments)}function T(){return(T=Object(a.a)(regeneratorRuntime.mark((function t(e,n){var r,a,o,c,i,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:if(r=t.sent,a=n?[n]:[],e){t.next=6;break}return t.abrupt("return",Array.from(new Set(a)));case 6:o=Object(D.a)(r.entries());try{for(o.s();!(c=o.n()).done;)i=Object(E.a)(c.value,2),s=i[0],u=i[1],2==s.length?a.push(s):e.includes(s)&&a.push.apply(a,Object(O.a)(u))}catch(t){o.e(t)}finally{o.f()}return t.abrupt("return",Array.from(new Set(a)).map((function(t){return t.toUpperCase()})));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(t){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(regeneratorRuntime.mark((function t(e){var n,r,a,o,c,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:n=t.sent,r=[e],a=Object(D.a)(n.entries());try{for(a.s();!(o=a.n()).done;)c=Object(E.a)(o.value,2),i=c[0],c[1].includes(e)&&r.push(i)}catch(t){a.e(t)}finally{a.f()}return t.abrupt("return",Array.from(new Set(r)));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(regeneratorRuntime.mark((function t(){var e,n,r,a,o,c,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Map,t.next=3,F.a.get("https://www.cbd.int/api/v2019/actions").query({q:JSON.stringify({$or:[{"actionDetails.operationalAreas.0":{$exists:!0}}]}),f:JSON.stringify({"actionDetails.operationalAreas":1,"actor.country.identifier":1})});case 3:n=t.sent,r=n.body,a=Object(D.a)(r),t.prev=6,a.s();case 8:if((o=a.n()).done){t.next=14;break}return c=o.value,i=c.actor,s=c.actionDetails,t.next=12,J(e,{actor:i,actionDetails:s});case 12:t.next=8;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),a.e(t.t0);case 19:return t.prev=19,a.f(),t.finish(19);case 22:return t.abrupt("return",e);case 23:case"end":return t.stop()}}),t,null,[[6,16,19,22]])})))).apply(this,arguments)}function M(t){return U.apply(this,arguments)}function U(){return(U=Object(a.a)(regeneratorRuntime.mark((function t(e){var n,r,a,o,c,i,s,u,p,f,m,l,d,h,C,A,b,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Map,t.next=3,P(e.toLowerCase());case 3:return r=t.sent,t.next=6,F.a.get("https://www.cbd.int/api/v2019/actions").query({q:JSON.stringify({"actionDetails.operationalAreas.identifier":{$in:r}}),f:JSON.stringify({"actor.actorType":1,"actor.types":1,"actor.name":1})});case 6:a=t.sent,o=a.body,c=Array.from(new Set(o.map((function(t){return((t.actor||{}).name||{}).en})))).length,i=o.map((function(t){return(t.actor.types||[]).map((function(t){return t.identifier}))})).flat(),s=o.map((function(t){return t.actor.actorType})),new Set([].concat(Object(O.a)(i),Object(O.a)(s)).filter((function(t){return!["organization","public"].includes(t)})).flat()),u=Object(D.a)(o);try{for(u.s();!(p=u.n()).done;)f=p.value,I(n,f)}catch(t){u.e(t)}finally{u.f()}m=[],l=Object(D.a)(n.entries()),t.prev=16,l.s();case 18:if((d=l.n()).done){t.next=30;break}return h=Object(E.a)(d.value,2),C=h[0],A=h[1],t.next=22,Object(x.d)("all",C);case 22:if(t.t0=t.sent,t.t0){t.next=25;break}t.t0=[];case 25:b=t.t0[0],y=b?b.name:C,m.push({name:y,count:A});case 28:t.next=18;break;case 30:t.next=35;break;case 32:t.prev=32,t.t1=t.catch(16),l.e(t.t1);case 35:return t.prev=35,l.f(),t.finish(35);case 38:return t.abrupt("return",{countsData:m,numberOfCommitments:o.length,numberOfActors:c});case 39:case"end":return t.stop()}}),t,null,[[16,32,35,38]])})))).apply(this,arguments)}function I(t,e){var n=e.actor,r=n.actorType,a=n.types,o=Array.from(new Set((a||[]).map((function(t){return t.identifier})).flat()));if(Array.isArray(r)&&"person"===r[0])return q(t,r[0]);if("person"===r)return q(t,r);if(a&&a.length)for(var c=0,i=o;c<i.length;c++){q(t,i[c])}}function q(t,e){if(!t.has(e))return t.set(e,1);var n=t.get(e)+1;return t.set(e,n)}function J(t,e){return L.apply(this,arguments)}function L(){return(L=Object(a.a)(regeneratorRuntime.mark((function t(e,n){var r,a,o,c,i,s,u,p,f,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.actor,a=n.actionDetails,o=(a||{}).operationalAreas,c=r.country||{},i=c.identifier,s=o?o.map((function(t){return t.identifier})):void 0,t.next=6,R(s,i);case 6:u=t.sent,p=Object(D.a)(u);try{for(p.s();!(f=p.n()).done;)m=f.value,H(e,m)}catch(t){p.e(t)}finally{p.f()}case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t,e){if(!t.has(e.toUpperCase()))return t.set(e.toUpperCase(),1);var n=t.get(e.toUpperCase())+1;return t.set(e.toUpperCase(),n)}var z=n(454),G=function(){if("undefined"==typeof window)return"";var t=window.document.cookie.replace(/(?:(?:^|.*;\s*)Preferences\s*=\s*([^;]*).*$)|^.*$/,"$1");return t?t.replace("Locale=",""):""},K=Object(a.a)(regeneratorRuntime.mark((function t(){var e,n,a,o,c,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.g)();case 2:return e=t.sent,t.next=5,$();case 5:return n=t.sent,a=!1,o="filter",c=!1,e.basePath="/action-agenda/contributions",t.next=12,u.a.default();case 12:return e.config=t.sent,e.config.projection="NaturalEarth1",e.controls.projection=!1,i=G()||Object(z.a)(),!0,t.abrupt("return",Object(r.a)(Object(r.a)({},e),{},{initEu:a,countryParamName:o,counts:n,initAnimation:c,locale:i,modal:!0}));case 18:case"end":return t.stop()}}),t)}))),Q=n(748),V=n(822),W=n(821);n(543);function X(){return(X=Object(a.a)(regeneratorRuntime.mark((function t(){var e,n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(x.c)();case 2:return t.next=4,Object(x.a)("all");case 4:return t.next=6,M(this.country.code);case 6:e=t.sent,n=e.countsData,r=e.numberOfCommitments,a=e.numberOfActors,this.createChart({countsData:n,numberOfCommitments:r,numberOfActors:a});case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Y(t){t&&t.dispose&&t.dispose()}var Z={name:"ActoinAgendaMapPopOver",components:{Icon:Q.a},props:{country:{type:Object,required:!0},options:{type:Object,required:!0}},methods:{toggle:function(){if("undefined"==typeof window)return;var t=new CustomEvent("countrySelected",{detail:void 0});window.document.dispatchEvent(t),this.chart.dispose()},createChart:function(t){var e=t.countsData,n=t.numberOfCommitments,r=t.numberOfActors;this.numberOfCommitments=n,this.numberOfActors=r,this.chart=Object(V.a)(this.$refs.pie,W.b),this.chart.minHeight="300px";var a=this.chart.series.push(new W.c);this.chart.radius=70,this.chart.labelsEnabled=!1,a.labelsEnabled=!1,a.autoMargins=!1,a.paddingLeft="5px",a.dataFields.value="count",a.dataFields.category="name",a.labels.template.disabled=!0,this.chart.data=e,this.chart.innerRadius=Object(V.b)(50),this.chart.legend=new W.a,this.chart.legend.position="right",this.chart.legend.labels.template.fontFamily="BenchNine, sans-serif"},dispose:Y,view:function(){var t=this.options.basePath;window.location.href="".concat(t,"?filter=").concat(this.country.code.toLowerCase())}},i18n:{messages:{en:{country:"country",commitment:"commitment | commitments",madeBy:"made by",actor:"actor | actors",view:"view"},ar:{country:"بلد",commitment:"التزام | إلتزامات",madeBy:"مصنوع بواسطة",actor:"ممثل | ممثلين",view:"منظر"},es:{country:"país",commitment:"compromiso | compromisos",madeBy:"hecho por",actor:"actor | actores",view:"vista"},fr:{country:"pays",commitment:"engagement | engagements",madeBy:"faite par",actor:"acteur | acteurs",view:"vue"},ru:{country:"страна",commitment:"обязательство | обязательства",madeBy:"сделано в",actor:"актер | актеры",view:"Посмотреть"},zh:{country:"国家",commitment:"承诺 |承诺",madeBy:"由制成",actor:"演员 |演员",view:"看法"}}},data:function(){return{chart:null,numberOfCommitments:0,numberOfActors:0}},mounted:function(){return X.apply(this,arguments)},beforeDestroy:function(){Y(this.chart)},errorCaptured:function(t,e){Y(e.$data.chart),console.error(t)}},tt=(n(749),n(616),n(29)),et=Object(tt.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"aa-modal shadow-sm"},[n("div",{staticClass:"toggle",on:{click:t.toggle}},[n("Icon",{staticClass:"fr",staticStyle:{"max-height":"25px","max-width":"25px"},attrs:{name:"cancel"}})],1),t._v(" "),n("div",[n("span",[t.country?n("strong",[t._v(t._s(t.country.name))]):t._e(),t._v(", \n      "),n("strong",[t._v(t._s(t.numberOfCommitments))]),t._v(" \n      "+t._s(t.$tc("commitment",t.numberOfCommitments))+"\n      "+t._s(t.$t("madeBy"))+" \n      "),n("strong",[t._v(t._s(t.numberOfActors))]),t._v(" \n      "+t._s(t.$tc("actor",t.numberOfActors))+"\n    ")])]),t._v(" "),n("div",{ref:"pie",staticClass:"main-row "}),t._v(" "),n("div",[n("button",{staticClass:"btn",on:{click:t.view}},[t._v("\n      "+t._s(t.$t("view"))+" "+t._s(t.$tc("commitment",t.numberOfCommitments))+"\n    ")])])])}),[],!1,null,"78804aaf",null).exports,nt=n(510);function rt(){return(rt=Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r.a,t.t1=r.a,t.t2={},t.next=5,K();case 5:t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5=this.options,this.opts=(0,t.t0)(t.t4,t.t5),this.constructMap();case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var at={name:"ActionAgendaMap",props:{options:{type:Object,default:function(){return{}}}},components:{PopOver:et,Icons:nt.b},mixins:[u.e],methods:{constructMap:function(){var t=this;this.map=new d(this.$refs.map,this.opts),window.document.addEventListener("countrySelected",(function(e){t.selectedCountry=e.detail}))}},computed:{hasPopOver:function(){return this.opts.modal}},data:function(){return{selectedCountry:void 0,map:void 0,opts:{}}},mounted:function(){return rt.apply(this,arguments)}},ot=(n(750),Object(tt.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{position:"relative",width:"100%"},attrs:{id:"scbd-map-nav"}},[n("Icons"),t._v(" "),t.hasPopOver&&t.selectedCountry&&t.map?n("PopOver",{attrs:{country:t.selectedCountry,options:t.map.options}}):t._e(),t._v(" "),n("div",{ref:"map",staticClass:"cont"})],1)}),[],!1,null,"977b0684",null).exports),ct=n(402),it=n(751),st=Object(ct.a)(it.a);function ut(t){ut.installed||(ut.installed=!0,t.component(st,ot))}var pt={install:ut,NAME:st};e.default=ot}}]);