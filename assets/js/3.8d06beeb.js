(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{437:function(e,t,n){"use strict";var r=n(30),i=n(11),a=n(1),s=n(222),o=RegExp.prototype,c=o.toString,l=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u="toString"!=c.name;(l||u)&&r(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in o)?s.call(e):n)}),{unsafe:!0})},453:function(e,t,n){"use strict";var r=n(40),i=n(7),a=n(2),s=n(8),o=a("species");e.exports=function(e){var t=r(e),n=i.f;s&&t&&!t[o]&&n(t,o,{configurable:!0,get:function(){return this}})}},456:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(39),n(41),n(10),n(62),n(12),n(15),n(121);var r=n(75);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}},462:function(e,t,n){"use strict";var r=n(0),i=n(233).trim;r({target:"String",proto:!0,forced:n(473)("trim")},{trim:function(){return i(this)}})},465:function(e,t,n){var r=n(11),i=n(245),a=n(22),s=n(122),o=n(229),c=n(244),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var u,p,h,d,f,g,v,b=n&&n.that,m=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),x=s(t,b,1+m+w),_=function(e){return u&&c(u),new l(!0,e)},S=function(e){return m?(r(e),w?x(e[0],e[1],_):x(e[0],e[1])):w?x(e,_):x(e)};if(y)u=e;else{if("function"!=typeof(p=o(e)))throw TypeError("Target is not iterable");if(i(p)){for(h=0,d=a(e.length);d>h;h++)if((f=S(e[h]))&&f instanceof l)return f;return new l(!1)}u=p.call(e)}for(g=u.next;!(v=g.call(u)).done;){try{f=S(v.value)}catch(e){throw c(u),e}if("object"==typeof f&&f&&f instanceof l)return f}return new l(!1)}},473:function(e,t,n){var r=n(1),i=n(234);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},475:function(e,t,n){"use strict";var r=n(476),i=n(477);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},476:function(e,t,n){"use strict";var r=n(0),i=n(3),a=n(128),s=n(30),o=n(228),c=n(465),l=n(455),u=n(4),p=n(1),h=n(237),d=n(86),f=n(232);e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),b=g?"set":"add",m=i[e],y=m&&m.prototype,w=m,x={},_=function(e){var t=y[e];s(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof m||!(v||y.forEach&&!p((function(){(new m).entries().next()})))))w=n.getConstructor(t,e,g,b),o.REQUIRED=!0;else if(a(e,!0)){var S=new w,O=S[b](v?{}:-0,1)!=S,k=p((function(){S.has(1)})),j=h((function(e){new m(e)})),C=!v&&p((function(){for(var e=new m,t=5;t--;)e[b](t,t);return!e.has(-0)}));j||((w=t((function(t,n){l(t,w,e);var r=f(new m,t,w);return null!=n&&c(n,r[b],{that:r,AS_ENTRIES:g}),r}))).prototype=y,y.constructor=w),(k||C)&&(_("delete"),_("has"),g&&_("get")),(C||O)&&_(b),v&&y.clear&&delete y.clear}return x[e]=w,r({global:!0,forced:w!=m},x),d(w,e),v||n.setStrong(w,e,g),w}},477:function(e,t,n){"use strict";var r=n(7).f,i=n(24),a=n(490),s=n(122),o=n(455),c=n(465),l=n(131),u=n(453),p=n(8),h=n(228).fastKey,d=n(38),f=d.set,g=d.getterFor;e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,r){o(e,u,t),f(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),p||(e.size=0),null!=r&&c(r,e[l],{that:e,AS_ENTRIES:n})})),d=g(t),v=function(e,t,n){var r,i,a=d(e),s=b(e,t);return s?s.value=n:(a.last=s={index:i=h(t,!0),key:t,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),p?a.size++:e.size++,"F"!==i&&(a.index[i]=s)),e},b=function(e,t){var n,r=d(e),i=h(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return a(u.prototype,{clear:function(){for(var e=d(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,p?e.size=0:this.size=0},delete:function(e){var t=d(this),n=b(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),p?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=d(this),r=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!b(this,e)}}),a(u.prototype,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),p&&r(u.prototype,"size",{get:function(){return d(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",i=g(t),a=g(r);l(e,t,(function(e,t){f(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},488:function(e,t,n){var r=n(8),i=n(3),a=n(128),s=n(232),o=n(14),c=n(7).f,l=n(64).f,u=n(227),p=n(222),h=n(230),d=n(30),f=n(1),g=n(6),v=n(38).enforce,b=n(453),m=n(2),y=n(246),w=n(247),x=m("match"),_=i.RegExp,S=_.prototype,O=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,k=/a/g,j=/a/g,C=new _(k)!==k,R=h.UNSUPPORTED_Y,T=r&&(!C||R||y||w||f((function(){return j[x]=!1,_(k)!=k||_(j)==j||"/a/i"!=_(k,"i")})));if(a("RegExp",T)){for(var $=function(e,t){var n,r,i,a,c,l,h=this instanceof $,d=u(e),f=void 0===t,b=[],m=e;if(!h&&d&&f&&e.constructor===$)return e;if((d||e instanceof $)&&(e=e.source,f&&(t="flags"in m?m.flags:p.call(m))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),m=e,y&&"dotAll"in k&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,R&&"sticky"in k&&(i=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),w&&(e=(a=function(e){for(var t,n=e.length,r=0,i="",a=[],s={},o=!1,c=!1,l=0,u="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:O.test(e.slice(r+1))&&(r+=2,c=!0),i+=t,l++;continue;case">"===t&&c:if(""===u||g(s,u))throw new SyntaxError("Invalid capture group name");s[u]=!0,a.push([u,l]),c=!1,u="";continue}c?u+=t:i+=t}return[i,a]}(e))[0],b=a[1]),c=s(_(e,t),h?this:S,$),(r||i||b.length)&&(l=v(c),r&&(l.dotAll=!0,l.raw=$(function(e){for(var t,n=e.length,r=0,i="",a=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++r);return i}(e),n)),i&&(l.sticky=!0),b.length&&(l.groups=b)),e!==m)try{o(c,"source",""===m?"(?:)":m)}catch(e){}return c},E=function(e){e in $||c($,e,{configurable:!0,get:function(){return _[e]},set:function(t){_[e]=t}})},L=l(_),P=0;L.length>P;)E(L[P++]);S.constructor=$,$.prototype=S,d(i,"RegExp",$)}b("RegExp")},489:function(e,t,n){"use strict";var r=n(0),i=n(43).find,a=n(130),s=!0;"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("find")},511:function(e,t,n){var r=n(30),i=Date.prototype,a=i.toString,s=i.getTime;new Date(NaN)+""!="Invalid Date"&&r(i,"toString",(function(){var e=s.call(this);return e==e?a.call(this):"Invalid Date"}))},514:function(e,t,n){"use strict";var r,i=n(0),a=n(31).f,s=n(22),o=n(132),c=n(23),l=n(133),u=n(42),p="".endsWith,h=Math.min,d=l("endsWith");i({target:"String",proto:!0,forced:!!(u||d||(r=a(String.prototype,"endsWith"),!r||r.writable))&&!d},{endsWith:function(e){var t=String(c(this));o(e);var n=arguments.length>1?arguments[1]:void 0,r=s(t.length),i=void 0===n?r:h(s(n),r),a=String(e);return p?p.call(t,a,i):t.slice(i-a.length,i)===a}})},519:function(e,t,n){"use strict";var r=n(476),i=n(477);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},544:function(e,t,n){"use strict";var r=n(0),i=n(43).every;r({target:"Array",proto:!0,forced:!n(45)("every")},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},619:function(e,t,n){},620:function(e,t,n){},621:function(e,t,n){},622:function(e,t,n){},623:function(e,t,n){},624:function(e,t,n){},625:function(e,t,n){},626:function(e,t,n){},627:function(e,t,n){},628:function(e,t,n){},752:function(e,t,n){"use strict";n(619)},753:function(e,t,n){"use strict";n(620)},754:function(e,t,n){"use strict";n(621)},755:function(e,t,n){"use strict";n(622)},756:function(e,t,n){"use strict";n(623)},757:function(e,t,n){"use strict";n(624)},758:function(e,t,n){"use strict";n(625)},759:function(e,t,n){"use strict";n(626)},760:function(e,t,n){"use strict";n(627)},761:function(e,t,n){"use strict";n(628)},762:function(e){e.exports=JSON.parse('{"a":"@action-agenda/search"}')},824:function(e,t,n){"use strict";n.r(t),n.d(t,"install",(function(){return Je})),n.d(t,"plugin",(function(){return Xe}));n(58),n(83);var r=n(44),i=n(432),a=n(59),s=(n(464),n(10),n(12),n(15),n(474),n(463),n(219),n(220),n(218),n(120),n(510)),o={messages:{en:{New:"New",Rejected:"Rejected",Published:"Published",Publish:"Publish",Unpublish:"Unpublish",Reject:"Reject",Deleted:"Deleted","Type to narrow filter options below or press enter to apply free text search":"Type to narrow filter options below or press enter to apply free text search","Press enter or click to select filter":"Press enter or click to select filter","Press enter to apply free text search or click the Search button":"Press enter to apply free text search or click the Search button",deleted:"Deleted",draft:"New",rejected:"Rejected",published:"Published",showing:"showing",to:"to",of:"of",filters:"Filters",action:"Action",actor:"Actor","View Action":"View Action","Text Search":"Text Search",Search:"Search","Free Text Searches":"Free Text Searches",close:"close",edit:"edit",help:"help",earth:"earth",delete:"delete",file:"file","upload to cloud":"upload to cloud",down:"down",search:"search",filter:"filter",Filter:"Filter",or:"or",page:"page",results:"results","Select option":"Select option"},ar:{deleted:"تم الحذف",draft:"جديد",rejected:"مرفوض",published:"نشرت",showing:"عرض",to:"ل",of:"من",filters:"المرشحات",action:"عمل",actor:"الممثل","View Action":"مشاهدة ملف Action","Text Search":"البحث عن النص",Search:"يبحث","Free Text Searches":"بحث نصي مجاني",close:"قريب",edit:"تعديل",help:"يساعد",earth:"أرض",delete:"حذف",file:"ملف","upload to cloud":"تحميل إلى السحابة",down:"تحت",search:"بحث",filter:"منقي",or:"أو",Filter:"منقي","Type to narrow filter options below or press enter to apply free text search":"اكتب لتضييق خيارات التصفية أدناه أو اضغط على إدخال لتطبيق بحث نصي مجاني","Press enter or click to select filter":"اضغط على Enter أو انقر لتحديد عامل التصفية","Press enter to apply free text search or click the Search button":'اضغط على Enter لتطبيق بحث نصي مجاني أو انقر فوق الزر "بحث"',Deleted:"تم الحذف",page:"صفحة",results:"النتائج","Select option":"حدد الخيار",New:"جديد",Rejected:"مرفوض",Published:"نشرت",Publish:"ينشر",Unpublish:"إلغاء النشر",Reject:"رفض"},es:{deleted:"Eliminado",draft:"Nuevo",rejected:"Rechazado",published:"Publicado",showing:"demostración",to:"a",of:"de",filters:"Filtros",action:"Acción",actor:"Actor","View Action":"Ver acción","Text Search":"Búsqueda de texto",Search:"Buscar","Free Text Searches":"Búsquedas de texto libre",close:"cerca",edit:"editar",help:"ayuda",earth:"tierra",delete:"Eliminar",file:"expediente","upload to cloud":"subir a la nube",down:"abajo",search:"buscar",filter:"filtrar",or:"o",Filter:"Filtrar","Type to narrow filter options below or press enter to apply free text search":"Escriba para restringir las opciones de filtro a continuación o presione Intro para aplicar la búsqueda de texto libre","Press enter or click to select filter":"Presione enter o haga clic para seleccionar el filtro","Press enter to apply free text search or click the Search button":"Presione enter para aplicar la búsqueda de texto libre o haga clic en el botón Buscar",Deleted:"Eliminado",page:"página",results:"resultados","Select option":"Seleccionar opción",New:"Nuevo",Rejected:"Rechazado",Published:"Publicado",Publish:"Publicar",Unpublish:"Anular publicación",Reject:"Rechazar"},fr:{deleted:"Supprimé",draft:"Nouveau",rejected:"Rejeté",published:"Publié",showing:"montrant",to:"à",of:"de",filters:"Filtres",action:"action",actor:"Acteur","View Action":"Afficher l'action","Text Search":"Recherche de texte",Search:"Rechercher","Free Text Searches":"Recherches de texte libre",close:"Fermer",edit:"Éditer",help:"aider",earth:"Terre",delete:"effacer",file:"déposer","upload to cloud":"télécharger dans le cloud",down:"vers le bas",search:"rechercher",filter:"filtre",or:"ou alors",Filter:"Filtre","Type to narrow filter options below or press enter to apply free text search":"Tapez pour affiner les options de filtre ci-dessous ou appuyez sur Entrée pour appliquer la recherche de texte libre","Press enter or click to select filter":"Appuyez sur Entrée ou cliquez pour sélectionner le filtre","Press enter to apply free text search or click the Search button":"Appuyez sur Entrée pour appliquer la recherche de texte libre ou cliquez sur le bouton Rechercher",Deleted:"Supprimé",page:"page",results:"résultats","Select option":"Sélectionnez l'option",New:"Nouveau",Rejected:"Rejeté",Published:"Publié",Publish:"Publier",Unpublish:"Dépublier",Reject:"Rejeter"},ru:{deleted:"Удалено",draft:"Новый",rejected:"Отклоненный",published:"Опубликовано",showing:"показывая",to:"к",of:"из",filters:"Фильтры",action:"Действие",actor:"Актер","View Action":"Посмотреть действие","Text Search":"Текстовый поиск",Search:"Поиск","Free Text Searches":"Бесплатные текстовые поиски",close:"Закрыть",edit:"редактировать",help:"помощь",earth:"земля",delete:"Удалить",file:"файл","upload to cloud":"загрузить в облако",down:"вниз",search:"поиск",filter:"фильтр",or:"или же",Filter:"Фильтр","Type to narrow filter options below or press enter to apply free text search":"Введите текст, чтобы сузить параметры фильтра ниже, или нажмите клавишу ВВОД, чтобы применить поиск по свободному тексту.","Press enter or click to select filter":"Нажмите Enter или щелкните, чтобы выбрать фильтр","Press enter to apply free text search or click the Search button":"Нажмите клавишу ВВОД, чтобы применить поиск по свободному тексту, или нажмите кнопку Поиск",Deleted:"Удалено",page:"страница",results:"полученные результаты","Select option":"Выберите опцию",New:"Новый",Rejected:"Отклоненный",Published:"Опубликовано",Publish:"Публиковать",Unpublish:"Отменить публикацию",Reject:"Отклонять"},zh:{deleted:"已删除",draft:"新的",rejected:"拒绝了",published:"已发表",showing:"显示",to:"至",of:"的",filters:"过滤器",action:"行动",actor:"演员","View Action":"查看操作","Text Search":"文本搜索",Search:"搜索","Free Text Searches":"自由文本搜索",close:"关闭",edit:"编辑",help:"帮助",earth:"地球",delete:"删除",file:"文件","upload to cloud":"上传到云端",down:"下",search:"搜索",filter:"筛选",or:"或者",Filter:"筛选","Type to narrow filter options below or press enter to apply free text search":"键入以缩小下面的过滤器选项或按 Enter 应用自由文本搜索","Press enter or click to select filter":"按 Enter 或单击以选择过滤器","Press enter to apply free text search or click the Search button":"按 Enter 键应用自由文本搜索或单击“搜索”按钮",Deleted:"已删除",page:"页",results:"结果","Select option":"选择选项",New:"新的",Rejected:"拒绝了",Published:"已发表",Publish:"发布",Unpublish:"取消发布",Reject:"拒绝"}}},c=n(440),l=(n(243),{}),u=function(){return new Promise(h)},p=function(e){return l.options=Object(i.a)(Object(i.a)({},l.options),e)};function h(e,t){var n=setTimeout((function(){clearInterval(i()),t("Error loading actions api- globalProps.options not set via initializeApi")}),5e3),r=setInterval((function(){var t=l.options;if(t){var r=t.api,a=t.getToken;if(clearInterval(i()),clearTimeout(n),!r)throw new Error("actions-api: you must pass an 'api' param too initializeApi");if(!a)throw new Error("actions-api: you must pass a 'getToken' function as a param too initializeApi");return e(Object.freeze(t))}}),100);function i(){return r}}var d=n(88),f=(n(475),n(511),n(437),n(87)),g={page:{sk:0,l:10}},v=function(){return g.page.sk<g.page.l},b=function(){return g.page={sk:0,l:10}},m=function(){return Object.freeze((e=g.page,JSON.parse(JSON.stringify(e))));var e},y=function(){return g.page.sk+=g.page.l,m()},w=n(456),x=(n(125),n(126),{documentStates:["meta.status"],actionCategories:["actionDetails.actionCategories"],aichis:["actionDetails.aichiTargets"],sdgs:["actionDetails.sdgs"],orgTypes:["actor.types"],govTypes:["actor.types"],subjects:["actionDetails.thematicAreas"],countries:["actionDetails.operationalAreas","actor.country.identifier","contacts.country.identifier"],regions:["actionDetails.operationalAreas"]}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.all([O(),S(),k(e)])},S=function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return t=e.sent,n=t.getToken,e.next=6,n();case 6:if(!e.sent){e.next=15;break}return e.t1="Ticket ",e.next=10,n();case 10:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),e.t0={Authorization:e.t3},e.next=16;break;case 15:e.t0={};case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return t=e.sent,n=t.api,e.abrupt("return","".concat(n,"/v2019/actions"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.t0=i.a,e.next=4,C();case 4:return e.t1=e.sent,e.t2={q:e.t1},e.t3=t,n=(0,e.t0)(e.t2,e.t3),e.abrupt("return",Object(f.b)(Object.assign(E(),n)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return e.t0=e.sent,t={q:e.t0},e.abrupt("return",Object(f.b)(Object.assign(L(),t)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function C(){return R.apply(this,arguments)}function R(){return(R=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=$(),n={},r=Object(w.a)(t),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=15;break}return a=i.value,e.next=9,T(a);case 9:if(s=e.sent){e.next=12;break}return e.abrupt("continue",13);case 12:n="$text"===s?D(a,n):A(n,s,a);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})))).apply(this,arguments)}function T(e){return e.includes("FREETEXT-")?"$text":Object(c.b)(e)}function $(){return new URL(document.location).searchParams.getAll("filter")}function E(){var e=Object(i.a)(Object(i.a)({},P()),{},{meta:1,"action.name":1,"action.description":1,"action.image":1});return delete e["meta.status"],delete e["actor.country.identifier"],delete e["actor.types"],Object(i.a)(Object(i.a)({},L()),{},{f:e})}function L(){return{q:{},sk:0,s:{"meta.modifiedOn":-1},f:P()}}function P(){var e={};for(var t in x){var n,r=Object(w.a)(x[t]);try{for(r.s();!(n=r.n()).done;){e[n.value]=1}}catch(e){r.e(e)}finally{r.f()}}return e}function A(e,t,n){return x[t].forEach((function(t){return t.includes("status")||t.includes("identifier")?e[t]=n:e[t]?e[t].$all?e[t].$all.push({identifier:n}):void 0:e[t]={$all:[{identifier:n}]}})),e}function D(e,t){var n=e.replace("FREETEXT-","");return t&&!t.$text?t.$text={$search:'"'.concat(n,'"')}:t.$text.$search+=' "'.concat(n,'"'),t}var F={cache:new Map,lastQuery:void 0},V=function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,o,c,l,u,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]&&h[0],e.prev=1,n=F.cache,e.next=5,Object(f.a)();case 5:return r=e.sent,!t&&!v()&&b(),i=t?y():m(),e.next=11,_(i);case 11:if(a=e.sent,s=Object(d.a)(a,3),o=s[0],c=s[1],l=s[2],!n.has(l.toString())){e.next=20;break}e.t0=n.get(l.toString()),e.next=23;break;case 20:return e.next=22,r.get(o,{headers:c,searchParams:l}).then((function(e){return e.json()}));case 22:e.t0=e.sent;case 23:return u=e.t0,q(l,u),t&&setTimeout((function(){return z()}),250),e.abrupt("return",u);case 29:if(e.prev=29,e.t1=e.catch(1),!(p=e.t1.response?e.t1.response.status:"")){e.next=34;break}return e.abrupt("return",console.error(p,e.t1));case 34:return e.abrupt("return",console.error(e.t1));case 35:case"end":return e.stop()}}),e,null,[[1,29]])})));return function(){return e.apply(this,arguments)}}(),N=function(){F.lastQuery=void 0,F.cache.clear()};function z(){return B.apply(this,arguments)}function B(){return(B=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(t=e.sent,n=t.$el){e.next=6;break}throw new Error("actions-api->list->emitNextPageLoaded: error $el not set vie actions-api->options->");case 6:(r=new Event("$nextPageLoaded",{bubbles:!0})).$page=m(),n.dispatchEvent(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){var n=F.cache;F.lastQuery=e,n.has(e.toString())||n.set(e.toString(),t)}n(121);var I={cache:new Map,lastQuery:void 0,total:0},U=function(){I.lastQuery=void 0,I.cache.clear()};function H(e){if("undefined"!=typeof window){var t=new Event("$actionAgendaCounts",{bubbles:!0});t.$counts=e,window.document.dispatchEvent(t)}}function M(e,t){var n=I.cache;I.lastQuery=e,n.has(e.toString())||n.set(e.toString(),t)}function G(){return K.apply(this,arguments)}function K(){return(K=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,r,a,s,o,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.length>0&&void 0!==u[0]?u[0]:[],n=t.length,r=J(t),a={},s=Object(w.a)(r);try{for(s.s();!(o=s.n()).done;)c=o.value,a[c]?a[c]++:a[c]=1}catch(e){s.e(e)}finally{s.f()}return e.next=8,Q(a);case 8:return l=e.sent,e.abrupt("return",Object(i.a)({filterCounts:a,total:n},l));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return W.apply(this,arguments)}function W(){return(W=Object(a.a)(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},r={},e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=13;break}return i=e.t1.value,e.next=7,Object(c.e)(i);case 7:a=e.sent,r[a]||(r[a]={}),r[a][i]=t[i],n[a]?n[a]=n[a]+t[i]:n[a]=t[i],e.next=3;break;case 13:return e.abrupt("return",{sourceTotals:n,sources:r});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t;if(e){for(var r in e)if("_id"!==r){var i=e[r],a=!!i&&!!i.identifier,s="string"==typeof i;if(s&&X(r))n.push(i);else{if(!a)if(Array.isArray(i)&&X(r)){var o,c=Object(w.a)(i);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.identifier?n.push(l.identifier):J(l,n)}}catch(e){c.e(e)}finally{c.f()}}else i instanceof Object&&J(i,n);a&&X(r)&&n.push(i.identifier)}}return n}}function X(e){if(!e||e.length<4)return!1;var t=[];for(var n in x)t=[].concat(Object(r.a)(t),Object(r.a)(x[n]));var i,a=Object(w.a)(t);try{for(a.s();!(i=a.n()).done;){if(i.value.includes(e))return!0}}catch(e){a.e(e)}finally{a.f()}return!1}var Y=V,Z=function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,r,i,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=I.cache,e.next=4,Object(f.a)();case 4:return n=e.sent,e.next=7,Promise.all([O(),S(),j()]);case 7:if(r=e.sent,i=Object(d.a)(r,3),s=i[0],o=i[1],c=i[2],!t.has(c.toString())){e.next=16;break}e.t0=t.get(c.toString()),e.next=19;break;case 16:return e.next=18,n.get(s,{headers:o,searchParams:c}).then(function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=G,e.next=3,t.json();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:e.t0=e.sent;case 19:return l=e.t0,M(c,l),H(l),e.abrupt("return",l);case 25:e.prev=25,e.t1=e.catch(0),u=e.t1.response?e.t1.response.status:"",console.error(u,e.t1);case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){Object(c.c)(),function(e){l.options=e}(e)},te=function(){N(),U()},ne=(n(514),n(61),n(85),n(39),n(41),n(454));function re(){return(re=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadIcons();case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ie(){return(ie=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadIcons();case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ae(){return(ae=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,i,a,s,o,l,u,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.actionDetails){e.next=2;break}return e.abrupt("return");case 2:if(t=this.actionDetails,n=t.aichiTargets,i=t.sdgs,(a=[].concat(Object(r.a)(n||[]),Object(r.a)(i||[])).concat()).length){e.next=6;break}return e.abrupt("return");case 6:s=Object(w.a)(a.entries()),e.prev=7,s.s();case 9:if((o=s.n()).done){e.next=19;break}if(l=Object(d.a)(o.value,2),u=l[0],p=l[1],!(h=(p=void 0===p?{}:p).identifier)){e.next=17;break}return e.next=16,Object(c.d)("all",h,!0);case 16:a[u]=e.sent;case 17:e.next=9;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(7),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:this.icons=a;case 28:case"end":return e.stop()}}),e,this,[[7,21,24,27]])})))).apply(this,arguments)}var se={name:"CardBody",props:{name:{type:Object,required:!0},description:{type:Object,required:!0},actionDetails:{type:Object}},computed:{nameComp:function(){var e=Object(ne.a)();return this.name[e]||this.name.en},descriptionComp:function(){var e=Object(ne.a)();return this.description[e]||this.description.en}},methods:{loadIcons:function(){return ae.apply(this,arguments)}},updated:function(){return re.apply(this,arguments)},created:function(){return ie.apply(this,arguments)},data:function(){return{icons:[]}}},oe=(n(752),n(29)),ce=Object(oe.a)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-sm-12"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v(e._s(e.nameComp))]),e._v(" "),n("p",{staticClass:"card-text desc"},[e._v(" "+e._s(e.descriptionComp)+" ")]),e._v(" "),e.icons.length?n("span",e._l(e.icons,(function(t,r){return n("span",{key:r},[t&&t.image&&!t.url?n("img",{staticClass:"action-icon mx-1",attrs:{src:t.image,alt:t.name}}):e._e(),e._v(" "),t&&t.image&&t.url?n("a",{attrs:{href:t.url,hreflang:"en",title:t.name}},[n("img",{staticClass:"action-icon mx-1",attrs:{src:t.image,alt:t.name}})]):e._e()])})),0):e._e()])])])])}),[],!1,null,"bd4b2f62",null).exports;var le={name:"State",props:{status:{type:String,required:!0}},methods:{is:function(e){return this.status===e}},i18n:o};n(753);function ue(){return(ue=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadIcons();case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function pe(){return(pe=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadIcons();case 2:this.activeTab=1;case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function he(){return(he=Object(a.a)(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.a)();case 3:return r=e.sent,i=this.getStatusUrl(t,n),a=this.auth.token?{Authorization:"Ticket ".concat(this.auth.token)}:{},e.next=8,r.post(i,{json:{},headers:a});case 8:return s=e.sent.data,this.$emit("status-change",{_id:t,status:n}),(o=new Event("$me",{bubbles:!0})).$me=this.me,o.$auth=this.auth,this.$el.dispatchEvent(o),e.abrupt("return",s);case 17:e.prev=17,e.t0=e.catch(0),console.error("AAList card.changeStatus: ",e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})))).apply(this,arguments)}function de(){return(de=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,i,a,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Object(r.a)((this.actionDetails||{}).actionCategories||[])).length){e.next=3;break}return e.abrupt("return");case 3:n=Object(w.a)(t.entries()),e.prev=4,n.s();case 6:if((i=n.n()).done){e.next=22;break}if(a=Object(d.a)(i.value,2),s=a[0],o=a[1],l=(o=void 0===o?{}:o).identifier){e.next=12;break}return e.abrupt("continue",20);case 12:return e.next=14,Object(c.d)("all",l,!0);case 14:if(t[s]=e.sent,t[s]){e.next=20;break}throw console.error("id",this._id),console.error("iconData",t),console.log("this.actionDetails",this.actionDetails),new Error("identifier not found");case 20:e.next=6;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),n.e(e.t0);case 27:return e.prev=27,n.f(),e.finish(27);case 30:this.icons=t;case 31:case"end":return e.stop()}}),e,this,[[4,24,27,30]])})))).apply(this,arguments)}var fe={name:"SearchListCard",components:{HorzCardAction:ce,State:Object(oe.a)(le,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cont"},[n("div",[e.is("published")?n("span",{staticClass:"badge badge-success "},[e._v(" "+e._s(e.$t("Published"))+" ")]):e._e(),e._v(" "),e.is("draft")?n("span",{staticClass:"badge badge-danger "},[e._v("  "+e._s(e.$t("New"))+" ")]):e._e(),e._v(" "),e.is("rejected")?n("span",{staticClass:"badge badge-warning "},[e._v(" "+e._s(e.$t("Rejected"))+" ")]):e._e(),e._v(" "),e.is("deleted")?n("span",{staticClass:"badge badge-warning "},[e._v(" "+e._s(e.$t("Deleted"))+" ")]):e._e()])])}),[],!1,null,"17a57248",null).exports},props:{_id:{type:String,required:!0},action:{type:Object,required:!0},actionDetails:{type:Object},meta:{type:Object},options:{type:Object,required:!0}},computed:{status:function(){return this.meta.status}},methods:{getStatusUrl:function(e,t){return"".concat(this.options.api,"/v2019/actions/").concat(e,"/status/").concat(t)},changeStatus:function(e,t){return he.apply(this,arguments)},loadIcons:function(){return de.apply(this,arguments)},viewUrl:function(e){var t=window.location,n=t.origin,r=t.pathname;return"".concat(n).concat((i=r,i.endsWith("/")?i.slice(0,-1):i),"/action?action-id=").concat(e);var i}},filters:{dateFormat:function(e){var t=new Date(e);return"".concat(t.getUTCFullYear(),"-").concat((r=t.getUTCMonth(),r<10?"0".concat(r+1):r+1),"-").concat((n=t.getUTCDate(),n<10?"0".concat(n):n),"  ");var n;var r}},data:function(){return{activeTab:1,icons:[]}},created:function(){return pe.apply(this,arguments)},updated:function(){return ue.apply(this,arguments)},i18n:o};n(754);var ge={name:"SearchList",components:{Card:Object(oe.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card card-row mb-5"},[n("div",{staticClass:"card-header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 text-right"},[n("div",{staticStyle:{position:"relative"}},[e.me&&e.me.hasRole("ActionAdmin")?n("State",{attrs:{status:e.meta.status}}):e._e(),e._v(" "),e.icons.length?n("span",{staticClass:"text-nowrap"},e._l(e.icons,(function(t,r){return n("span",{key:r},[t.image&&!t.url?n("img",{staticClass:"action-icon mx-1",attrs:{src:t.image,alt:t.name}}):e._e(),e._v(" "),t.image&&t.url?n("a",{attrs:{href:t.url,hreflang:"en",title:t.name}},[n("img",{staticClass:"action-icon mx-1",attrs:{src:t.image,alt:t.name}})]):e._e()])})),0):e._e()],1)])])]),e._v(" "),n("HorzCardAction",e._b({},"HorzCardAction",Object.assign({},e.action,{actionDetails:e.actionDetails}),!1)),e._v(" "),n("div",{staticClass:"card-footer"},[n("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Card actions, view, edit publish, reject"}},[n("a",{staticClass:"btn btn-primary btn-sm",attrs:{href:e.viewUrl(e._id),type:"button"}},[e._v(e._s(e.$t("View Action")))]),e._v(" "),e.me&&e.me.hasRole("ActionAdmin")&&"published"!==e.status?n("button",{staticClass:"btn btn-outline-dark btn-sm",attrs:{type:"button"},on:{click:function(t){return e.changeStatus(e._id,"publish")}}},[e._v(e._s(e.$t("Publish")))]):e._e(),e._v(" "),e.me&&e.me.hasRole("ActionAdmin")&&"draft"!==e.status?n("button",{staticClass:"btn btn-outline-dark btn-sm",attrs:{type:"button"},on:{click:function(t){return e.changeStatus(e._id,"draft")}}},[e._v(e._s(e.$t("Unpublish")))]):e._e(),e._v(" "),e.me&&e.me.hasRole("ActionAdmin")&&"rejected"!==e.status?n("button",{staticClass:"btn btn-outline-dark btn-sm",attrs:{type:"button"},on:{click:function(t){return e.changeStatus(e._id,"reject")}}},[e._v(e._s(e.$t("Reject")))]):e._e()]),e._v(" "),n("small",{staticClass:"text-muted float-right"},[e._v(e._s(e._f("dateFormat")(e.meta.modifiedOn)))])])],1)}),[],!1,null,"31f79ae4",null).exports},props:{rows:{type:Array,required:!0},options:{type:Object,required:!0},onScroll:{type:Function,required:!0}},methods:{cardProps:function(e){return Object(i.a)(Object(i.a)({},e),{},{options:this.options})}},mounted:function(){window.addEventListener("scroll",this.onScroll(this.$el))},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll(this.$el))}},ve=(n(755),Object(oe.a)(ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"list",staticClass:"list"},e._l(e.rows,(function(t,r){return n("card",e._b({key:r},"card",e.cardProps(t),!1))})),1)}),[],!1,null,"12500864",null).exports),be=n(91),me={hostname:"cbddev.xyz",api:"https://api.cbddev.xyz/api",basePath:"/",locale:function(){if("undefined"==typeof window)return"";var e=window.document.cookie.replace(/(?:(?:^|.*;\s*)Preferences\s*=\s*([^;]*).*$)|^.*$/,"$1");return e?e.replace("Locale=",""):""}()||Object(ne.a)(),smTop:"0",mdTop:"0",lgTop:"0"},ye=Object(i.a)({hostname:"staging.cbd.int"},me),we={prod:Object(i.a)(Object(i.a)({hostname:"cbd.int"},ye),{},{api:"https://www.cbd.int/api"}),stg:ye,dev:me},xe={forceEnv:String,basePath:String,locale:String,api:String,hostname:String,listenExternally:Boolean,preLoadFilter:String,smTop:String,mdTop:String,lgTop:String};Object(be.b)({environments:we,validationMap:xe,name:"@action-agenda/search"},"@action-agenda/search");var _e=Object(be.a)("@action-agenda/search"),Se=(n(519),n(124),n(37),n(488),n(225),n(146)),Oe=n(609);n(226),n(462),n(242),n(84),n(489),n(544);function ke(e){return 0!==e&&(!(!Array.isArray(e)||0!==e.length)||!e)}function je(e,t,n,r){return e.filter((function(e){return function(e,t){return void 0===e&&(e="undefined"),null===e&&(e="null"),!1===e&&(e="false"),-1!==e.toString().toLowerCase().indexOf(t.trim())}(r(e,n),t)}))}function Ce(e){return e.filter((function(e){return!e.$isLabel}))}function Re(e,t){return function(n){return n.reduce((function(n,r){return r[e]&&r[e].length?(n.push({$groupLabel:r[t],$isLabel:!0}),n.concat(r[e])):n}),[])}}var Te=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},$e={name:"vue-multiselect",mixins:[{data:function(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},value:{type:null,default:function(){return[]}},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default:function(e,t){return ke(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default:function(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1}},mounted:function(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue:function(){return this.value||0===this.value?Array.isArray(this.value)?this.value:[this.value]:[]},filteredOptions:function(){var e,t=this.search||"",n=t.toLowerCase().trim(),r=this.options.concat();return r=this.internalSearch?this.groupValues?this.filterAndFlat(r,n,this.label):je(r,n,this.label,this.customLabel):this.groupValues?Re(this.groupValues,this.groupLabel)(r):r,r=this.hideSelected?r.filter((e=this.isSelected,function(){return!e.apply(void 0,arguments)})):r,this.taggable&&n.length&&!this.isExistingOption(n)&&("bottom"===this.tagPosition?r.push({isTag:!0,label:t}):r.unshift({isTag:!0,label:t})),r.slice(0,this.optionsLimit)},valueKeys:function(){var e=this;return this.trackBy?this.internalValue.map((function(t){return t[e.trackBy]})):this.internalValue},optionKeys:function(){var e=this;return(this.groupValues?this.flatAndStrip(this.options):this.options).map((function(t){return e.customLabel(t,e.label).toString().toLowerCase()}))},currentOptionLabel:function(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:function(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("input",this.multiple?[]:null))},search:function(){this.$emit("search-change",this.search,this.id)}},methods:{getValue:function(){return this.multiple?this.internalValue:0===this.internalValue.length?null:this.internalValue[0]},filterAndFlat:function(e,t,n){return Te(function(e,t,n,r,i){return function(a){return a.map((function(a){var s;if(!a[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];var o=je(a[n],e,t,i);return o.length?(s={},Object(Oe.a)(s,r,a[r]),Object(Oe.a)(s,n,o),s):[]}))}}(t,n,this.groupValues,this.groupLabel,this.customLabel),Re(this.groupValues,this.groupLabel))(e)},flatAndStrip:function(e){return Te(Re(this.groupValues,this.groupLabel),Ce)(e)},updateSearch:function(e){this.search=e},isExistingOption:function(e){return!!this.options&&this.optionKeys.indexOf(e)>-1},isSelected:function(e){var t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled:function(e){return!!e.$isDisabled},getOptionLabel:function(e){if(ke(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;var t=this.customLabel(e,this.label);return ke(t)?"":t},select:function(e,t){if(e.$isLabel&&this.groupSelect)this.selectGroup(e);else if(!(-1!==this.blockKeys.indexOf(t)||this.disabled||e.$isDisabled||e.$isLabel)&&(!this.max||!this.multiple||this.internalValue.length!==this.max)&&("Tab"!==t||this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e))return void("Tab"!==t&&this.removeElement(e));this.$emit("select",e,this.id),this.multiple?this.$emit("input",this.internalValue.concat([e]),this.id):this.$emit("input",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup:function(e){var t=this,n=this.options.find((function(n){return n[t.groupLabel]===e.$groupLabel}));if(n)if(this.wholeGroupSelected(n)){this.$emit("remove",n[this.groupValues],this.id);var r=this.internalValue.filter((function(e){return-1===n[t.groupValues].indexOf(e)}));this.$emit("input",r,this.id)}else{var i=n[this.groupValues].filter((function(e){return!(t.isOptionDisabled(e)||t.isSelected(e))}));this.$emit("select",i,this.id),this.$emit("input",this.internalValue.concat(i),this.id)}},wholeGroupSelected:function(e){var t=this;return e[this.groupValues].every((function(e){return t.isSelected(e)||t.isOptionDisabled(e)}))},wholeGroupDisabled:function(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.disabled&&!e.$isDisabled)if(!this.allowEmpty&&this.internalValue.length<=1)this.deactivate();else{var n="object"===Object(Se.a)(e)?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.$emit("remove",e,this.id),this.multiple){var r=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("input",r,this.id)}else this.$emit("input",null,this.id);this.closeOnSelect&&t&&this.deactivate()}},removeLastElement:function(){-1===this.blockKeys.indexOf("Delete")&&0===this.search.length&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate:function(){var e=this;this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&0===this.pointer&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.$nextTick((function(){return e.$refs.search.focus()}))):this.$el.focus(),this.$emit("open",this.id))},deactivate:function(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search.blur():this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle:function(){this.isOpen?this.deactivate():this.activate()},adjustPosition:function(){if("undefined"!=typeof window){var e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||"below"===this.openDirection||"bottom"===this.openDirection?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}}},{data:function(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition:function(){return this.pointer*this.optionHeight},visibleElements:function(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions:function(){this.pointerAdjust()},isOpen:function(){this.pointerDirty=!1}},methods:{optionHighlight:function(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight:function(e,t){var n=this;if(!this.groupSelect)return["multiselect__option--group","multiselect__option--disabled"];var r=this.options.find((function(e){return e[n.groupLabel]===t.$groupLabel}));return r&&!this.wholeGroupDisabled(r)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(r)}]:"multiselect__option--disabled"},addPointerElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Enter",t=e.key;this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward:function(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward:function(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset:function(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust:function(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet:function(e){this.pointer=e,this.pointerDirty=!0}}}],props:{name:{type:String,default:""},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:function(e){return"and ".concat(e," more")}},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{isSingleLabelVisible:function(){return(this.singleValue||0===this.singleValue)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible:function(){return!(this.internalValue.length||this.searchable&&this.isOpen)},visibleValues:function(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue:function(){return this.internalValue[0]},deselectLabelText:function(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText:function(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText:function(){return this.showLabels?this.selectLabel:""},selectGroupLabelText:function(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText:function(){return this.showLabels?this.selectedLabel:""},inputStyle:function(){if(this.searchable||this.multiple&&this.value&&this.value.length)return this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}},contentStyle:function(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove:function(){return"above"===this.openDirection||"top"===this.openDirection||"below"!==this.openDirection&&"bottom"!==this.openDirection&&"above"===this.preferredOpenDirection},showSearchInput:function(){return this.searchable&&(!this.hasSingleSelectedSlot||!this.visibleSingleValue&&0!==this.visibleSingleValue||this.isOpen)}}};n(756);var Ee={name:"SCBDSelect",components:{Multiselect:Object(oe.a)($e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"multiselect",class:{"multiselect--active":e.isOpen,"multiselect--disabled":e.disabled,"multiselect--above":e.isAbove},attrs:{tabindex:e.searchable?-1:e.tabindex},on:{focus:function(t){return e.activate()},blur:function(t){!e.searchable&&e.deactivate()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerForward())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerBackward())}],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.stopPropagation(),t.target!==t.currentTarget?null:e.addPointerElement(t))},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.deactivate()}}},[e._t("caret",(function(){return[n("div",{staticClass:"multiselect__select",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.toggle()}}})]}),{toggle:e.toggle}),e._v(" "),e._t("clear",null,{search:e.search}),e._v(" "),n("div",{ref:"tags",staticClass:"multiselect__tags"},[e._t("selection",(function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visibleValues.length>0,expression:"visibleValues.length > 0"}],staticClass:"multiselect__tags-wrap"},[e._l(e.visibleValues,(function(t,r){return[e._t("tag",(function(){return[n("span",{key:r,staticClass:"multiselect__tag"},[n("span",{domProps:{textContent:e._s(e.getOptionLabel(t))}}),e._v(" "),n("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"1"},on:{keypress:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.removeElement(t))},mousedown:function(n){return n.preventDefault(),e.removeElement(t)}}})])]}),{option:t,search:e.search,remove:e.removeElement})]}))],2),e._v(" "),e.internalValue&&e.internalValue.length>e.limit?[e._t("limit",(function(){return[n("strong",{staticClass:"multiselect__strong",domProps:{textContent:e._s(e.limitText(e.internalValue.length-e.limit))}})]}))]:e._e()]}),{search:e.search,remove:e.removeElement,values:e.visibleValues,isOpen:e.isOpen}),e._v(" "),n("transition",{attrs:{name:"multiselect__loading"}},[e._t("loading",(function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"multiselect__spinner"})]}))],2),e._v(" "),e.searchable?n("input",{ref:"search",staticClass:"multiselect__input",style:e.inputStyle,attrs:{name:e.name,id:e.id,type:"text",autocomplete:"nope",placeholder:e.placeholder,disabled:e.disabled,tabindex:e.tabindex},domProps:{value:e.search},on:{input:function(t){return e.updateSearch(t.target.value)},focus:function(t){return t.preventDefault(),e.activate()},blur:function(t){return t.preventDefault(),e.deactivate()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.deactivate()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.pointerForward())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.pointerBackward())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:(t.stopPropagation(),e.removeLastElement())}],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),t.target!==t.currentTarget?null:e.addPointerElement(t))}}}):e._e(),e._v(" "),e.isSingleLabelVisible?n("span",{staticClass:"multiselect__single",on:{mousedown:function(t){return t.preventDefault(),e.toggle.apply(null,arguments)}}},[e._t("singleLabel",(function(){return[[e._v(e._s(e.currentOptionLabel))]]}),{option:e.singleValue})],2):e._e(),e._v(" "),e.isPlaceholderVisible?n("span",{staticClass:"multiselect__placeholder",on:{mousedown:function(t){return t.preventDefault(),e.toggle.apply(null,arguments)}}},[e._t("placeholder",(function(){return[e._v("\n          "+e._s(e.placeholder)+"\n        ")]}))],2):e._e()],2),e._v(" "),n("transition",{attrs:{name:"multiselect"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],ref:"list",staticClass:"multiselect__content-wrapper",style:{maxHeight:e.optimizedHeight+"px"},attrs:{tabindex:"-1"},on:{focus:e.activate,mousedown:function(e){e.preventDefault()}}},[n("ul",{staticClass:"multiselect__content",style:e.contentStyle},[e._t("beforeList"),e._v(" "),e.multiple&&e.max===e.internalValue.length?n("li",[n("span",{staticClass:"multiselect__option"},[e._t("maxElements",(function(){return[e._v("Maximum of "+e._s(e.max)+" options selected. First remove a selected option to select another.")]}))],2)]):e._e(),e._v(" "),!e.max||e.internalValue.length<e.max?e._l(e.filteredOptions,(function(t,r){return n("li",{key:r,staticClass:"multiselect__element"},[t&&(t.$isLabel||t.$isDisabled)?e._e():n("span",{staticClass:"multiselect__option",class:e.optionHighlight(r,t),attrs:{"data-select":t&&t.isTag?e.tagPlaceholder:e.selectLabelText,"data-selected":e.selectedLabelText,"data-deselect":e.deselectLabelText},on:{click:function(n){return n.stopPropagation(),e.select(t)},mouseenter:function(t){return t.target!==t.currentTarget?null:e.pointerSet(r)}}},[e._t("option",(function(){return[n("span",[e._v(e._s(e.getOptionLabel(t)))])]}),{option:t,search:e.search})],2),e._v(" "),t&&(t.$isLabel||t.$isDisabled)?n("span",{staticClass:"multiselect__option",class:e.groupHighlight(r,t),attrs:{"data-select":e.groupSelect&&e.selectGroupLabelText,"data-deselect":e.groupSelect&&e.deselectGroupLabelText},on:{mouseenter:function(t){if(t.target!==t.currentTarget)return null;e.groupSelect&&e.pointerSet(r)},mousedown:function(n){return n.preventDefault(),e.selectGroup(t)}}},[e._t("option",(function(){return[n("span",[e._v(e._s(e.getOptionLabel(t)))])]}),{option:t,search:e.search})],2):e._e()])})):e._e(),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:e.showNoResults&&0===e.filteredOptions.length&&e.search&&!e.loading,expression:"showNoResults && (filteredOptions.length === 0 && search && !loading)"}]},[n("span",{staticClass:"multiselect__option"},[e._t("noResult",(function(){return[e._v("No elements found. Consider changing the search query.")]}),{search:e.search})],2)]),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:e.showNoOptions&&0===e.options.length&&!e.search&&!e.loading,expression:"showNoOptions && (options.length === 0 && !search && !loading)"}]},[n("span",{staticClass:"multiselect__option"},[e._t("noOptions",(function(){return[e._v("List is empty.")]}))],2)]),e._v(" "),e._t("afterList")],2)])])],2)}),[],!1,null,"4f7f3da0",null).exports,Icon:s.a},props:{name:{},id:{type:String,required:!0},value:{type:[Array,Object,String],required:!0},placeholder:{type:Array},options:{type:Array,required:!0},addTextSearch:{type:Function,required:!0},onChange:{type:Function,required:!0},countsMap:{type:Object}},methods:{update:function(){this.$emit("input",this.values)},highLight:function(e){var t=e.search,n=e.option;t&&(this.latestSearchText=t);if(!t||!n.name)return n.name;var r=new RegExp(t,"ig");return n.name.replace(r,'<span style="font-weight: 900;">'.concat(t,"</span>"))},onClose:function(){this.latestSearchText=""}},computed:{counts:function(){var e=this;return function(t){var n=t.identifier;return e.countsMap?e.countsMap[n]:"ZERO"}}},data:function(){return{values:this.value,isLoading:!1,latestSearchText:""}},i18n:o},Le=(n(757),Object(oe.a)(Ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("multiselect",{ref:"multiSelect",staticClass:"fix",attrs:{id:e.id,"track-by":"identifier",label:"name",options:e.options,multiple:!0,taggable:!0,"group-values":"data","group-label":"filter",searchable:!0,placeholder:e.$t("Type to narrow filter options below or press enter to apply free text search"),selectLabel:e.$t("Press enter or click to select filter"),"tag-placeholder":e.$t("Press enter to apply free text search or click the Search button"),"hide-selected":!0},on:{tag:e.addTextSearch,input:e.update,select:e.onChange,close:e.onClose,remove:e.onChange},scopedSlots:e._u([{key:"option",fn:function(t){return[n("section",{attrs:{id:"opt-t"}},[t.option.$groupLabel?n("div",{staticClass:"container-fluid",staticStyle:{cursor:"pointer"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("span",{staticClass:"filter-label"},[e._v(e._s(t.option.$groupLabel))])])])]):e._e(),e._v(" "),t.option.$groupLabel?e._e():n("div",{staticClass:"container-fluid"},[n("div",{ref:t.option+"-opt",staticClass:"row"},[n("div",{staticClass:"col-1 text-center"},[t.option.image?e._e():n("span",[e._v(" ")]),e._v(" "),t.option.image?n("img",{staticClass:"option-image",attrs:{src:t.option.image,alt:t.option.name}}):e._e()]),e._v(" "),n("div",{staticClass:"col-11"},[n("span",{domProps:{innerHTML:e._s(e.highLight(t))}}),e._v(" "),t.option.desc?n("span",{staticClass:"small muted"},[e._v(e._s(t.option.description))]):e._e(),e._v(" "),n("span",[e._v("     "),n("span",{staticClass:"badge badge-secondary"},[e._v(e._s(e.counts(t.option)))])])])])])])]}}]),model:{value:e.values,callback:function(t){e.values=t},expression:"values"}},[n("template",{slot:"beforeList"},[e.latestSearchText?n("div",[n("button",{staticClass:"btn btn-outline-info my-3 mx-3",attrs:{type:"button"},on:{click:function(t){e.addTextSearch(e.latestSearchText),e.$refs.multiSelect.deactivate()}}},[e._v(e._s(e.$t("Text Search")))])]):e._e()]),e._v(" "),n("template",{slot:"placeholder"},[n("Icon",{staticStyle:{"max-height":"1em","max-width":"1em"},attrs:{name:"search"}}),e._v(" "+e._s(e.$t("Search"))+" "+e._s(e.$t("or"))+" "),n("Icon",{staticStyle:{"max-height":"1em","max-width":"1em"},attrs:{name:"filter"}}),e._v(" "+e._s(e.$t("Filter"))+"\n  ")],1)],2)}),[],!1,null,"3000c228",null).exports);function Pe(){return(Pe=Object(a.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialize();case 2:this.readSearchParams(),window.document.addEventListener("$me",(function(){t.me&&t.me.isAuthenticated&&t.initialize()}));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ae(){return(Ae=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n,i,a,s,o,l,u,p,h,f,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getCounts(),Object(c.a)("all")]);case 2:for(t=e.sent,n=Object(d.a)(t,2),i=n[0],a=n[1],s=new Set(Object.keys(i.filterCounts)),o=[],l=Ve()||Object(ne.a)(),u=0,p=Object(r.a)(a);u<p.length;u++)h=p[u],f=h.filter,g=h.data,(v={filter:f[l]}).data=g.filter((function(e){var t=e.identifier;return s.has(t)})),o.push(v);this.textFilterOptionGroup.filter=this.$t("Free Text Searches"),this.options=[].concat(o,[this.textFilterOptionGroup]),De(this.me,this.adminRole)||this.options.shift(),this.countsMap=i.filterCounts;case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!e.hasRole||t&&!t.length)return!1;if(Array.isArray(t)){var n,r=Object(w.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.hasRole(i))return!0}}catch(e){r.e(e)}finally{r.f()}}return"string"==typeof t&&e.hasRole(t)}function Fe(){return(Fe=Object(a.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.d)("all",t,!0);case 2:(n=e.sent)&&!Array.isArray(n)&&this.filters.push(n),t.includes("FREETEXT-")&&this.injectTextAsOption(t.replace("FREETEXT-",""));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ve(){if("undefined"==typeof window)return"";var e=window.document.cookie.replace(/(?:(?:^|.*;\s*)Preferences\s*=\s*([^;]*).*$)|^.*$/,"$1");return e?e.replace("Locale=",""):""}var Ne={name:"SearchFilterNav",props:{getCounts:{type:Function,required:!0},adminRole:{type:[Array,String]}},components:{AllFiltersSelect:Le},methods:{initialize:function(){return Ae.apply(this,arguments)},addTextSearch:function(e){var t=this;this.injectTextAsOption(e),setTimeout((function(){return t.updateSearchQuery()}),100),setTimeout((function(){return t.$emit("$scbdFilterChange")}),600)},updateSearchQuery:function(){e=window.location,t=e.href,n=e.search,r=t.replace(n,""),window.history.pushState({path:r},"",r),this.filters.forEach((function(e){return function(e){var t=new URL(window.location),n=t.origin,r=t.search,i=t.pathname,a="filter=".concat(encodeURIComponent(e)),s=r?"".concat(r,"&").concat(a):"?".concat(a),o="".concat(n).concat(i).concat(s);window.history.pushState({path:o},"",o)}(e.identifier)}));var e,t,n,r},onChange:function(e,t){var n=this;console.log(e),console.log(t),setTimeout(this.updateSearchQuery,100),setTimeout((function(){return n.$emit("$scbdFilterChange")}),600),setTimeout((function(){return n.initialize()}),800)},readSearchParams:function(){var e=this;new URL(document.location).searchParams.getAll("filter").forEach((function(t){return e.addFilter(t)}))},addFilter:function(e){return Fe.apply(this,arguments)},injectTextAsOption:function(e){var t=(n=e,{identifier:"FREETEXT-".concat(n),name:n});var n;this.textFilterOptionGroup.data.push(t),this.filters.push(t)}},data:function(){return{inputText:"",filters:[],options:[],textFilterOptionGroup:{filter:"",data:[]},countsMap:void 0}},created:function(){return Pe.apply(this,arguments)},errorCaptured:function(e){console.error("@scbd/search.SearchFilterNav error:",e),console.error(e)}},ze=Object(oe.a)(Ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"aa-search-filter-nav"}},[n("nav",{staticClass:"position-relative navbar navbar-light bg-light px-0 filter-nav"},[n("div",{staticClass:"col-12 px-0"},[n("AllFiltersSelect",{ref:"allFiltersSelect",staticClass:"px-0",attrs:{id:"filter-all",options:e.options,"add-text-search":e.addTextSearch,"on-change":e.onChange,countsMap:e.countsMap},model:{value:e.filters,callback:function(t){e.filters=t},expression:"filters"}})],1)])])}),[],!1,null,null,null).exports,Be=(n(758),{name:"Loading",components:{Spinner:Object(oe.a)({},(function(e,t){var n=t._c;return n("div",{staticClass:"cont"},[n("div",{staticClass:"lds-ring",style:{width:Number(t.props.size)+5+"px",height:Number(t.props.size)+5+"px"}},[n("div",{style:{"border-width":t.props.size/100*3+"px","border-top-color":t.props.color}}),t._v(" "),n("div",{style:{"border-width":t.props.size/100*3+"px","border-top-color":t.props.color}}),t._v(" "),n("div",{style:{"border-width":t.props.size/100*3+"px","border-top-color":t.props.color}}),t._v(" "),n("div",{style:{"border-width":t.props.size/100*3+"px","border-top-color":t.props.color}})]),t._v(" "),n("div",{staticClass:"slot-hold"},[t._t("default")],2)])}),[],!0,null,"831b848a",null).exports},props:["percent"]}),qe=(n(759),{name:"Feedback",components:{Loading:Object(oe.a)(Be,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loading"},[t("div",{staticClass:"cont mx-auto"},[t("div",{staticClass:"ring"},[t("Spinner",{attrs:{size:40,color:"#009b48"}},[t("div",{staticClass:"text-cont"},[t("img",{staticClass:"leaf",attrs:{src:"https://attachments.cbd.int/cbd-leaf-green.svg"}}),t("br"),this._v(" "),this.percent?t("span",{staticClass:"percent"},[this._v(" "+this._s(this.percent)+"%")]):this._e()])])],1)])])}),[],!1,null,"6027b062",null).exports},props:{total:{type:Number,required:!0},page:{type:Number,required:!0},totalPages:{type:Number,required:!0},loading:{type:Boolean,required:!0}},i18n:o});n(760);function Ie(){return(Ie=Object(a.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(Object(i.a)(Object(i.a)({},this.opts),{},{getToken:function(){return(t.auth||{}).token}})),this.opts.preLoadFilter&&this.preLoadFilter(this.opts.preLoadFilter),e.next=4,this.setRowsAndTotal();case 4:window.document.addEventListener("$me",Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.me&&t.me.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return te(),e.next=5,t.setRowsAndTotal();case 5:case"end":return e.stop()}}),e)})))),this.opts.listenExternally&&window.document.addEventListener("$scbdFilterChange",this.onScbdFilterChange);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ue(){return(Ue=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.page=1,this.total=0,e.next=4,this.setRowsAndTotal();case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function He(){return(He=Object(a.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Z();case 3:return t=e.sent,n=t.total,this.total=n,e.next=8,Y();case 8:this.rows=e.sent,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Me={name:"ScbdSearch",components:{FilterNav:ze,Feedback:Object(oe.a)(qe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"feedback mb-3"},[n("hr",{staticClass:"my-0"}),e._v(" "),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row",staticStyle:{"min-height":"3em"}},[n("div",{staticClass:"col-4 px-1 my-auto"},[e._v("\n        "+e._s(e.total)+" "+e._s(e.$t("results"))+"\n      ")]),e._v(" "),n("div",{staticClass:"col-4"},[n("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]})],1),e._v(" "),n("div",{staticClass:"col-4 px-1 my-auto text-right"},[e.totalPages&&e.totalPages>1?n("span",{staticClass:"text-nowrap"},[n("span",{staticClass:"d-none d-sm-inline"},[e._v(e._s(e.$t("page"))+": ")]),e.page>1?n("span",[e._v("1 -")]):e._e(),e._v(" "+e._s(e.page)+" of "+e._s(e.totalPages))]):e._e()])])]),e._v(" "),n("hr",{staticClass:"my-0"})])}),[],!1,null,"9db8099c",null).exports,List:ve,Icons:s.b},props:{options:{type:Object,required:!1},forceEnv:{type:String,required:!1,default:"production"}},methods:{onScbdFilterChange:function(){return Ue.apply(this,arguments)},getCounts:Z,setRowsAndTotal:function(){return He.apply(this,arguments)},onScroll:function(e){var t=this;return p({$el:e}),Object(a.a)(regeneratorRuntime.mark((function e(){var n,i,a,s,o,c,l,u,p,h,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window,a=i.pageYOffset,s=window.document.documentElement,o=s.scrollHeight,c=s.scrollTop,l=s.offsetHeight,u=window.document.body.scrollTop,p=u||c,h=Math.abs(l+(a||p)),d=h<=o/2,!(t.page===t.totalPages||d||t.loading)){e.next=9;break}return e.abrupt("return");case 9:return t.loading=!0,window.addEventListener("$nextPageLoaded",t.onNextPageLoaded),e.next=13,Y(!0);case 13:f=e.sent,(n=t.rows).push.apply(n,Object(r.a)(f));case 15:case"end":return e.stop()}}),e)})))},onNextPageLoaded:function(e){var t=this,n=e.$page.sk;this.page=n/10+1,window.removeEventListener("$nextPageLoaded",this.onNextPageLoaded),setTimeout((function(){return t.loading=!1}),100)},preLoadFilter:function(e){if(!e)return;t=e,n=new URL(window.location),r=n.origin,i=n.search,a=n.pathname,s="filter=".concat(encodeURIComponent(t)),o=i.includes(t),c=i?"".concat(i,"&").concat(s):"?".concat(s),l="".concat(r).concat(a).concat(o?i:c),window.history.pushState({path:l},"",l);var t,n,r,i,a,s,o,c,l}},computed:{opts:function(){return Object(i.a)({},_e(this.options,this.forceEnv))},totalPages:function(){return Math.ceil(this.total/10)},top:function(){var e=function(){var e="undefined"==typeof window?0:Math.max(window.document.documentElement.clientWidth||0,window.innerWidth||0);if(e<=480)return"sm";if(e>480&&e<=768)return"md";if(e>768)return"lg"}();return this.opts["".concat(e,"Top")]||0}},created:function(){return Ie.apply(this,arguments)},data:function(){return{rows:[],total:0,page:1,loading:!1,notResized:!0}},errorCaptured:function(e){console.error("ActionSearch error:",e),console.error(e)},i18n:o},Ge=(n(761),Object(oe.a)(Me,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"aa-search"}},[e._m(0),e._v(" "),n("div",{staticClass:"stick",style:{top:e.top+"px"}},[n("FilterNav",{attrs:{"get-counts":e.getCounts,adminRole:"ActionAdmin"},on:{$scbdFilterChange:e.onScbdFilterChange}}),e._v(" "),n("Feedback",e._b({},"Feedback",{total:e.total,page:e.page,totalPages:e.totalPages,loading:e.loading},!1))],1),e._v(" "),e.total&&e.rows.length?n("List",{attrs:{rows:e.rows,options:e.opts,"on-scroll":e.onScroll}}):e._e()],1)}),[function(){var e=this.$createElement;return(this._self._c||e)("Icons")}],!1,null,null,null).exports),Ke=n(402),Qe=n(762),We=Object(Ke.a)(Qe.a.replace("@action-agenda/","AA-"));function Je(e){Je.installed||(Je.installed=!0,e.component(We,Ge))}var Xe={install:Je,NAME:We};t.default=Ge}}]);